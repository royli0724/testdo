<!DOCTYPE html><html lang="zh-TW"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>èƒŒå–®å­—æ‡‰ç”¨</title><script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.3.4/vue.global.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script><link rel="manifest" href="manifest.json"><script>"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then((()=>console.log("Service Worker è¨»å†ŠæˆåŠŸ"))).catch((e=>console.log("Service Worker è¨»å†Šå¤±æ•—:",e)))</script><style>:root{--md-primary-50:#fff3e0;--md-primary-100:#ffe0b2;--md-primary-200:#ffcc80;--md-primary-300:#ffb74d;--md-primary-400:#ffa726;--md-primary-500:#ff9800;--md-primary-600:#fb8c00;--md-primary-700:#f57c00;--md-primary-800:#ef6c00;--md-primary-900:#e65100;--md-secondary-50:#fce4ec;--md-secondary-500:#ff7043;--md-secondary-700:#d84315;--md-success:#4caf50;--md-warning:#ff9800;--md-error:#f44336;--md-info:#2196f3;--md-surface:#ffffff;--md-surface-variant:#f5f5f5;--md-on-surface:#212121;--md-on-surface-variant:#757575;--md-outline:#e0e0e0;--md-outline-variant:#f5f5f5;--md-shadow-1:0 1px 3px rgba(0, 0, 0, 0.12),0 1px 2px rgba(0, 0, 0, 0.24);--md-shadow-2:0 3px 6px rgba(0, 0, 0, 0.16),0 3px 6px rgba(0, 0, 0, 0.23);--md-shadow-3:0 10px 20px rgba(0, 0, 0, 0.19),0 6px 6px rgba(0, 0, 0, 0.23);--md-shadow-4:0 14px 28px rgba(0, 0, 0, 0.25),0 10px 10px rgba(0, 0, 0, 0.22);--md-headline-1:96px;--md-headline-2:60px;--md-headline-3:48px;--md-headline-4:34px;--md-headline-5:24px;--md-headline-6:20px;--md-subtitle-1:16px;--md-subtitle-2:14px;--md-body-1:16px;--md-body-2:14px;--md-button:14px;--md-caption:12px;--md-overline:10px;--md-spacing-1:4px;--md-spacing-2:8px;--md-spacing-3:12px;--md-spacing-4:16px;--md-spacing-5:20px;--md-spacing-6:24px;--md-spacing-8:32px;--md-spacing-10:40px;--md-spacing-12:48px;--md-spacing-16:64px;--md-radius-xs:4px;--md-radius-sm:8px;--md-radius-md:12px;--md-radius-lg:16px;--md-radius-xl:20px;--md-radius-full:28px}*{margin:0;padding:0;box-sizing:border-box}body{font-family:Roboto,-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;background:linear-gradient(135deg,var(--md-primary-100) 0,var(--md-primary-200) 100%);min-height:100vh;font-size:var(--md-body-1);line-height:1.5;color:var(--md-on-surface)}.app{max-width:1200px;margin:0 auto;padding:var(--md-spacing-6)}.header{text-align:center;color:var(--md-primary-800);margin-bottom:var(--md-spacing-8)}.header h1{font-size:var(--md-headline-4);font-weight:400;margin-bottom:var(--md-spacing-2);letter-spacing:-.5px}.header p{font-size:var(--md-subtitle-1);color:var(--md-primary-700);font-weight:400}.stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:var(--md-spacing-4);margin-bottom:var(--md-spacing-8)}.stat-card{background:var(--md-surface);padding:var(--md-spacing-6);border-radius:var(--md-radius-lg);text-align:center;border:1px solid var(--md-outline-variant);transition:all .3s cubic-bezier(.4, 0, .2, 1)}.stat-card:hover{transform:translateY(-2px)}.stat-number{font-size:var(--md-headline-5);font-weight:500;margin-bottom:var(--md-spacing-1);color:var(--md-primary-600)}.stat-label{font-size:var(--md-body-2);color:var(--md-on-surface-variant);font-weight:400}.nav-tabs{display:flex;background:var(--md-surface);border-radius:var(--md-radius-full);padding:var(--md-spacing-1);margin-bottom:var(--md-spacing-8);border:1px solid var(--md-outline-variant)}.nav-tab{flex:1;padding:var(--md-spacing-3) var(--md-spacing-5);border:none;background:0 0;color:var(--md-on-surface-variant);cursor:pointer;border-radius:var(--md-radius-full);transition:all .2s cubic-bezier(.4, 0, .2, 1);font-weight:500;font-size:var(--md-button);text-transform:none;letter-spacing:.1px;position:relative;overflow:hidden}.nav-tab::before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:var(--md-primary-500);opacity:0;transition:opacity .2s cubic-bezier(.4, 0, .2, 1)}.nav-tab:hover::before{opacity:.08}.nav-tab.active{background:var(--md-primary-500);color:#fff;box-shadow:var(--md-shadow-1)}.nav-tab.active::before{display:none}.content-section{background:var(--md-surface);border-radius:var(--md-radius-xl);padding:var(--md-spacing-8);border:1px solid var(--md-outline-variant)}.content-section h2{font-size:var(--md-headline-6);font-weight:500;margin-bottom:var(--md-spacing-6);color:var(--md-primary-700)}.form-group{margin-bottom:var(--md-spacing-6)}.form-group label{display:block;margin-bottom:var(--md-spacing-2);font-weight:500;color:var(--md-on-surface);font-size:var(--md-body-2)}.form-input,.form-select,.form-textarea{width:100%;padding:var(--md-spacing-4);border:2px solid var(--md-outline);border-radius:var(--md-radius-sm);font-size:var(--md-body-1);transition:all .2s cubic-bezier(.4, 0, .2, 1);background:var(--md-surface);color:var(--md-on-surface)}.form-input:focus,.form-select:focus,.form-textarea:focus{outline:0;border-color:var(--md-primary-500);box-shadow:0 0 0 3px rgba(255,152,0,.12)}.form-textarea{resize:vertical;min-height:100px;font-family:inherit}.tags-input{display:flex;flex-wrap:wrap;gap:var(--md-spacing-2);padding:var(--md-spacing-3);border:2px solid var(--md-outline);border-radius:var(--md-radius-sm);min-height:56px;align-items:center;background:var(--md-surface)}.tags-input:focus-within{border-color:var(--md-primary-500);box-shadow:0 0 0 3px rgba(255,152,0,.12)}.tag{background:var(--md-primary-100);color:var(--md-primary-800);padding:var(--md-spacing-1) var(--md-spacing-3);border-radius:var(--md-radius-full);font-size:var(--md-caption);font-weight:500;display:flex;align-items:center;gap:var(--md-spacing-1);border:1px solid var(--md-primary-200)}.tag-remove{background:0 0;border:none;color:var(--md-primary-700);cursor:pointer;font-size:14px;padding:0;width:16px;height:16px;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .2s cubic-bezier(.4, 0, .2, 1)}.tag-remove:hover{background:var(--md-primary-200)}.tag-input{border:none;outline:0;padding:var(--md-spacing-2);flex:1;min-width:120px;font-size:var(--md-body-1);background:0 0}.btn{display:inline-flex;align-items:center;justify-content:center;gap:var(--md-spacing-2);padding:var(--md-spacing-3) var(--md-spacing-6);border:none;border-radius:var(--md-radius-full);font-size:var(--md-button);font-weight:500;font-family:inherit;cursor:pointer;transition:all .2s cubic-bezier(.4, 0, .2, 1);text-decoration:none;position:relative;overflow:hidden;min-height:40px;letter-spacing:.1px;text-transform:none}.btn:disabled{opacity:.38;cursor:not-allowed}.btn::before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:currentColor;opacity:0;transition:opacity .2s cubic-bezier(.4, 0, .2, 1)}.btn:hover::before{opacity:.08}.btn:active::before{opacity:.12}.btn-primary{background:var(--md-primary-500);color:#fff;box-shadow:var(--md-shadow-1)}.btn-primary:hover{box-shadow:var(--md-shadow-2);transform:translateY(-1px)}.btn-secondary{background:var(--md-surface-variant);color:var(--md-on-surface-variant);border:1px solid var(--md-outline)}.btn-sm{padding:var(--md-spacing-2) var(--md-spacing-4);font-size:var(--md-caption);min-height:32px;border-radius:var(--md-radius-lg)}.btn-success{background:var(--md-success);color:#fff}.btn-warning{background:var(--md-warning);color:#fff}.btn-danger{background:var(--md-error);color:#fff}.btn-info{background:var(--md-info);color:#fff}.btn-fab{width:56px;height:56px;border-radius:50%;box-shadow:var(--md-shadow-2)}.btn-fab:hover{box-shadow:var(--md-shadow-3)}.card-list{display:grid;gap:var(--md-spacing-3);margin-top:var(--md-spacing-6)}.card-item{background:var(--md-surface);border-radius:0 16px 16px 0;padding:var(--md-spacing-4);border:1px solid var(--md-outline-variant);transition:all .3s cubic-bezier(.4, 0, .2, 1);position:relative;display:flex;flex-direction:column;gap:6px}.card-item::before{content:"";position:absolute;left:-1px;top:-1px;bottom:-1px;width:3px;background:var(--md-primary-400)}.card-header{display:flex;justify-content:space-between;align-items:flex-start;gap:var(--md-spacing-2)}.card-word{font-size:var(--md-subtitle-1);font-weight:500;color:var(--md-on-surface);flex:1;margin:0}.card-translation{color:var(--md-on-surface-variant);font-size:var(--md-body-2);margin:0}.card-examples{margin:0}.card-example{background:var(--md-surface-variant);padding:var(--md-spacing-2) var(--md-spacing-3);border-radius:var(--md-radius-sm);margin-bottom:var(--md-spacing-1);font-style:italic;font-size:var(--md-caption);color:var(--md-on-surface-variant);display:flex;justify-content:space-between;align-items:center;gap:var(--md-spacing-2)}.card-example:last-child{margin-bottom:0}.card-tags{display:flex;flex-wrap:wrap;gap:var(--md-spacing-1);margin:4px 0}.card-tag{background:var(--md-primary-50);color:var(--md-primary-700);padding:2px var(--md-spacing-2);border-radius:var(--md-radius-xs);font-size:10px;font-weight:500;border:1px solid var(--md-primary-100)}.card-actions{display:flex;gap:var(--md-spacing-1);justify-content:flex-end;margin-top:auto}.card-actions .btn{padding:var(--md-spacing-1) var(--md-spacing-3);font-size:var(--md-caption);min-height:28px;font-weight:400}.search-filters{display:grid;grid-template-columns:2fr 1fr 1fr;gap:var(--md-spacing-4);margin-bottom:var(--md-spacing-6);align-items:end}.pagination{display:flex;justify-content:center;align-items:center;gap:var(--md-spacing-2);margin-top:var(--md-spacing-8);flex-wrap:wrap}.pagination button{padding:var(--md-spacing-2) var(--md-spacing-4);border:1px solid var(--md-outline);background:var(--md-surface);border-radius:var(--md-radius-sm);cursor:pointer;transition:all .2s cubic-bezier(.4, 0, .2, 1);font-size:var(--md-body-2);color:var(--md-on-surface)}.pagination button:hover:not(:disabled){background:var(--md-surface-variant);border-color:var(--md-primary-300)}.pagination button:disabled{opacity:.38;cursor:not-allowed}.pagination .current-page{background:var(--md-primary-500);color:#fff;border-color:var(--md-primary-500)}.pagination span{color:var(--md-on-surface-variant);font-size:var(--md-body-2);padding:0 var(--md-spacing-2)}.study-card{background:var(--md-surface);border-radius:var(--md-radius-xl);padding:var(--md-spacing-10);text-align:center;box-shadow:var(--md-shadow-3);max-width:600px;margin:0 auto;border:1px solid var(--md-outline-variant)}.study-word{font-size:var(--md-headline-3);font-weight:400;color:var(--md-on-surface);margin-bottom:var(--md-spacing-6);display:flex;align-items:center;justify-content:center;gap:var(--md-spacing-4);flex-wrap:wrap}.study-translation{font-size:var(--md-headline-6);color:var(--md-on-surface-variant);margin-bottom:var(--md-spacing-8);font-weight:400}.study-examples{text-align:left;margin-bottom:var(--md-spacing-8)}.study-example{background:var(--md-surface-variant);padding:var(--md-spacing-4);border-radius:var(--md-radius-md);margin-bottom:var(--md-spacing-3);font-style:italic;font-size:var(--md-body-1);display:flex;justify-content:space-between;align-items:center}.study-actions{display:grid;grid-template-columns:repeat(2,1fr);gap:var(--md-spacing-4)}.study-btn{padding:var(--md-spacing-4) var(--md-spacing-6);border:none;border-radius:var(--md-radius-lg);font-size:var(--md-body-1);font-weight:500;cursor:pointer;transition:all .2s cubic-bezier(.4, 0, .2, 1);min-height:48px;position:relative;overflow:hidden}.study-btn:hover{transform:translateY(-1px);box-shadow:var(--md-shadow-2)}.btn-again{background:#ffebee;color:#c62828;border:1px solid #ffcdd2}.btn-hard{background:#fff3e0;color:#ef6c00;border:1px solid #ffe0b2}.btn-good{background:#e8f5e8;color:#2e7d32;border:1px solid #c8e6c9}.btn-easy{background:#e3f2fd;color:#1976d2;border:1px solid #bbdefb}.show-translation-toggle{margin-bottom:var(--md-spacing-6);text-align:center}.toggle-switch{position:relative;display:inline-block;width:52px;height:32px}.toggle-switch input{opacity:0;width:0;height:0}.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:var(--md-outline);transition:.3s cubic-bezier(.4, 0, .2, 1);border-radius:16px}.slider:before{position:absolute;content:"";height:24px;width:24px;left:4px;bottom:4px;background-color:#fff;transition:.3s cubic-bezier(.4, 0, .2, 1);border-radius:50%;box-shadow:var(--md-shadow-1)}input:checked+.slider{background-color:var(--md-primary-500)}input:checked+.slider:before{transform:translateX(20px)}.voice-controls{display:flex;align-items:center;gap:var(--md-spacing-4);flex-wrap:wrap;justify-content:center}.voice-controls label{font-weight:500;color:var(--md-on-surface);font-size:var(--md-body-2)}.speed-control{display:flex;align-items:center;gap:var(--md-spacing-2);background:var(--md-surface-variant);padding:var(--md-spacing-2) var(--md-spacing-3);border-radius:var(--md-radius-full)}.speed-slider{width:80px;height:4px;border-radius:2px;background:var(--md-outline);outline:0;-webkit-appearance:none}.speed-slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:16px;height:16px;border-radius:50%;background:var(--md-primary-500);cursor:pointer}.speed-display{font-size:var(--md-caption);color:var(--md-on-surface-variant);min-width:35px;text-align:center;font-weight:500}.voice-btn{padding:var(--md-spacing-2) var(--md-spacing-3);border:1px solid var(--md-outline);background:var(--md-surface);color:var(--md-on-surface);border-radius:var(--md-radius-lg);cursor:pointer;font-size:var(--md-caption);transition:all .2s cubic-bezier(.4, 0, .2, 1);min-height:32px}.voice-btn:hover:not(:disabled){background:var(--md-surface-variant);border-color:var(--md-primary-300)}.voice-btn:disabled{opacity:.38;cursor:not-allowed}.voice-btn.speaking{background:var(--md-success);color:#fff;border-color:var(--md-success)}.voice-select{padding:var(--md-spacing-2) var(--md-spacing-3);border:1px solid var(--md-outline);border-radius:var(--md-radius-sm);font-size:var(--md-body-2);background:var(--md-surface);color:var(--md-on-surface)}.voice-controls-inline{display:inline-flex;align-items:center;gap:var(--md-spacing-1);flex-shrink:0}.voice-btn-sm{padding:var(--md-spacing-1);font-size:10px;min-height:20px;border-radius:var(--md-radius-xs);width:24px;height:24px;display:flex;align-items:center;justify-content:center}.file-input{display:none}.file-label{display:inline-flex;align-items:center;gap:var(--md-spacing-2);padding:var(--md-spacing-4) var(--md-spacing-6);background:var(--md-success);color:#fff;border-radius:var(--md-radius-full);cursor:pointer;font-weight:500;transition:all .2s cubic-bezier(.4, 0, .2, 1);font-size:var(--md-button);box-shadow:var(--md-shadow-1)}.file-label:hover{box-shadow:var(--md-shadow-2);transform:translateY(-1px)}.no-cards{text-align:center;padding:var(--md-spacing-12);color:var(--md-on-surface-variant)}.no-cards h3{margin-bottom:var(--md-spacing-3);font-size:var(--md-headline-6);font-weight:400;color:var(--md-on-surface)}.no-cards p{font-size:var(--md-body-1);line-height:1.6}@media (max-width:1200px){.app{max-width:100%}.search-filters{grid-template-columns:1fr;gap:var(--md-spacing-3)}}@media (max-width:960px){.stats{grid-template-columns:repeat(2,1fr)}.nav-tabs{flex-direction:column;gap:var(--md-spacing-1)}.nav-tab{border-radius:var(--md-radius-md)}.study-actions{grid-template-columns:1fr;gap:var(--md-spacing-3)}.voice-controls{flex-direction:column;align-items:stretch;gap:var(--md-spacing-3)}.speed-control{justify-content:space-between}}@media (max-width:768px){.app{padding:var(--md-spacing-4)}.header h1{font-size:var(--md-headline-5)}.content-section{padding:var(--md-spacing-6)}.stats{grid-template-columns:1fr}.study-word{font-size:var(--md-headline-4);flex-direction:column;gap:var(--md-spacing-2)}.study-translation{font-size:var(--md-headline-6)}.card-header{flex-direction:row;align-items:center}.voice-btn-sm{min-height:24px!important}.pagination{flex-direction:column;gap:var(--md-spacing-2)}.pagination button,.pagination span{width:100%;text-align:center}}@media (max-width:480px){.app{padding:var(--md-spacing-3)}.header h1{font-size:var(--md-headline-6)}.content-section{padding:var(--md-spacing-4);border-radius:var(--md-radius-md)}.study-card{padding:var(--md-spacing-6)}.study-word{font-size:var(--md-headline-5)}.study-translation{font-size:var(--md-subtitle-1)}.study-btn{padding:var(--md-spacing-3) var(--md-spacing-4);font-size:var(--md-body-2)}.card-list{gap:var(--md-spacing-2)}.voice-controls{gap:var(--md-spacing-2)}.voice-btn{padding:var(--md-spacing-2);font-size:var(--md-caption)}.speed-control{flex-direction:column;gap:var(--md-spacing-2)}.speed-slider{width:100%}.form-group{margin-bottom:var(--md-spacing-4)}.btn:last-child{margin-bottom:0}}@media (hover:none) and (pointer:coarse){.btn,.nav-tab,.tag-remove,.voice-btn{min-height:44px}.form-input,.form-select,.form-textarea{min-height:44px;font-size:16px}.study-btn{min-height:56px}.card-item:hover{transform:none;box-shadow:var(--md-shadow-1)}.btn:hover::before,.nav-tab:hover::before{opacity:0}}@media (max-width:896px) and (orientation:landscape){.study-card{padding:var(--md-spacing-4)}.study-word{font-size:var(--md-headline-6);margin-bottom:var(--md-spacing-3)}.study-translation{font-size:var(--md-subtitle-1);margin-bottom:var(--md-spacing-4)}.study-actions{grid-template-columns:repeat(4,1fr);gap:var(--md-spacing-2)}.study-btn{padding:var(--md-spacing-2) var(--md-spacing-3);font-size:var(--md-body-2)}.stats{grid-template-columns:repeat(4,1fr)}.stat-card{padding:var(--md-spacing-3)}.stat-number{font-size:var(--md-headline-6)}}@media (min-width:1440px){.app{max-width:1400px}.stats{grid-template-columns:repeat(4,1fr)}.search-filters{grid-template-columns:3fr 1fr 1fr;gap:var(--md-spacing-6)}.card-list{grid-template-columns:repeat(auto-fit,minmax(400px,1fr))}.content-section{padding:var(--md-spacing-10)}}@media (prefers-contrast:high){.btn,.card-item,.form-input,.form-select,.form-textarea,.nav-tab{border-width:2px}.study-btn{border-width:2px;font-weight:600}}@media (prefers-reduced-motion:reduce){*,::after,::before{animation-duration:0s!important;animation-iteration-count:1!important;transition-duration:0s!important}.btn:hover,.card-item:hover{transform:none}}@media (prefers-color-scheme:dark){:root{--md-surface:#121212;--md-surface-variant:#1e1e1e;--md-on-surface:#e0e0e0;--md-on-surface-variant:#a0a0a0;--md-outline:#333333;--md-outline-variant:#2a2a2a}body{background:linear-gradient(135deg,#1a1a1a 0,#2a2a2a 100%)}.form-input,.form-select,.form-textarea{background:var(--md-surface-variant);color:var(--md-on-surface)}.card-example,.study-example{background:var(--md-surface-variant);color:var(--md-on-surface-variant)}.tag{background:rgba(255,152,0,.2);color:var(--md-primary-200);border-color:rgba(255,152,0,.3)}}@media print{.btn,.card-actions,.nav-tabs,.study-actions,.voice-controls{display:none!important}body{background:#fff!important;color:#000!important}.content-section{border:1px solid #ccc!important}.card-item{break-inside:avoid;margin-bottom:1rem}}</style></head><body><div id="app"><div class="app"><div class="header"><h1>ğŸ“š èƒŒå–®å­—æ‡‰ç”¨</h1><p>æ™ºèƒ½é–“éš”é‡è¤‡å­¸ç¿’ç³»çµ±</p></div><div class="stats"><div class="stat-card"><div class="stat-number">{{ totalCards }}</div><div class="stat-label">ç¸½å–®å­—æ•¸</div></div><div class="stat-card"><div class="stat-number">{{ todayDue }}</div><div class="stat-label">ä»Šæ—¥è¤‡ç¿’</div></div><div class="stat-card"><div class="stat-number">{{ totalReviews }}</div><div class="stat-label">ç¸½è¤‡ç¿’æ¬¡æ•¸</div></div><div class="stat-card"><div class="stat-number">{{ averageEase.toFixed(1) }}</div><div class="stat-label">å¹³å‡é›£åº¦</div></div></div><div v-if="speechSupported" class="content-section" style="padding:15px;margin-bottom:20px"><div class="voice-controls"><label style="font-weight:600;color:#333">ğŸ”Š èªéŸ³è¨­å®šï¼š</label> <select v-model="selectedVoice" class="voice-select"><option v-for="voice in availableVoices" :key="voice.code" :value="voice.code">{{ voice.flag }} {{ voice.name }}</option></select><div class="speed-control"><span style="font-size:12px;color:#666">èªé€Ÿ:</span> <input type="range" v-model="speechRate" min="0.5" max="2.0" step="0.1" class="speed-slider" title="æ‹–å‹•èª¿æ•´èªé€Ÿ"> <span class="speed-display">{{ speechRate }}x</span></div><button v-if="isSpeaking" @click="stopSpeaking" class="voice-btn">â¹ï¸ åœæ­¢</button></div></div><div class="nav-tabs"><button class="nav-tab" :class="{ active: currentTab === 'add' }" @click="currentTab = 'add'">âœï¸ æ–°å¢å–®å­—</button> <button class="nav-tab" :class="{ active: currentTab === 'browse' }" @click="currentTab = 'browse'">ğŸ“– ç€è¦½å–®å­—</button> <button class="nav-tab" :class="{ active: currentTab === 'study' }" @click="currentTab = 'study'">ğŸ¯ é–‹å§‹å­¸ç¿’</button> <button class="nav-tab" :class="{ active: currentTab === 'import' }" @click="currentTab = 'import'">ğŸ“¥ åŒ¯å…¥åŒ¯å‡º</button></div><div v-if="currentTab === 'add'" class="content-section"><h2>{{ editingCard ? 'ç·¨è¼¯å–®å­—å¡' : 'æ–°å¢å–®å­—å¡' }}</h2><form @submit.prevent="addCard"><div class="form-group"><label>è‹±æ–‡å–®å­— *</label> <input type="text" v-model="newCard.english" class="form-input" required></div><div class="form-group"><label>ä¸­æ–‡ç¿»è­¯ *</label> <input type="text" v-model="newCard.chinese" class="form-input" required></div><div class="form-group"><label>ä¾‹å¥ (æœ€å¤š3ç­†)</label><div v-for="(example, index) in newCard.examples" :key="index" style="margin-bottom:10px"><input type="text" v-model="newCard.examples[index]" :placeholder="`ä¾‹å¥ ${index + 1}`" class="form-input"></div></div><div class="form-group"><label>æ¨™ç±¤åˆ†é¡</label><div class="tags-input"><span v-for="tag in newCard.tags" :key="tag" class="tag">{{ tag }} <button type="button" class="tag-remove" @click="removeTag(tag)">Ã—</button> </span><input type="text" v-model="tagInput" @keydown.enter.prevent="addTag" @keydown.comma.prevent="addTag" placeholder="è¼¸å…¥æ¨™ç±¤å¾ŒæŒ‰ Enter" class="tag-input"></div></div><div style="display:flex;gap:10px"><button type="submit" class="btn btn-primary">{{ editingCard ? 'æ›´æ–°å–®å­—å¡' : 'æ–°å¢å–®å­—å¡' }}</button> <button v-if="editingCard" type="button" @click="cancelEdit" class="btn btn-secondary">å–æ¶ˆç·¨è¼¯</button></div></form></div><div v-if="currentTab === 'browse'" class="content-section"><h2>ç€è¦½å–®å­—</h2><div class="search-filters"><div><input type="text" v-model="searchQuery" placeholder="æœå°‹å–®å­—ã€ç¿»è­¯æˆ–ä¾‹å¥..." class="form-input"></div><div><select v-model="selectedTag" class="form-select"><option value="">æ‰€æœ‰æ¨™ç±¤</option><option v-for="tag in allTags" :key="tag" :value="tag">{{ tag }}</option></select></div><div><select v-model="pageSize" class="form-select"><option :value="10">æ¯é  10 ç­†</option><option :value="20">æ¯é  20 ç­†</option><option :value="30">æ¯é  30 ç­†</option><option :value="50">æ¯é  50 ç­†</option></select></div></div><div v-if="filteredCards.length === 0" class="no-cards"><h3>æ²’æœ‰æ‰¾åˆ°ç¬¦åˆæ¢ä»¶çš„å–®å­—</h3><p>è©¦è©¦èª¿æ•´æœå°‹æ¢ä»¶æˆ–æ–°å¢ä¸€äº›å–®å­—å§ï¼</p></div><div v-else class="card-list"><div v-for="card in paginatedCards" :key="card.id" class="card-item"><div class="card-header"><div class="card-word">{{ card.english }}</div><div class="voice-controls-inline"><button @click="speakText(card.english)" :disabled="!speechSupported || isSpeaking" :class="['voice-btn', 'voice-btn-sm', { speaking: isSpeaking }]">{{ isSpeaking ? 'ğŸ”Š' : 'ğŸ”ˆ' }}</button></div></div><div class="card-translation">{{ card.chinese }}</div><div v-if="card.examples.some(ex => ex)" class="card-examples"><div v-for="example in card.examples.filter(ex => ex)" :key="example" class="card-example">{{ example }}<div class="voice-controls-inline"><button @click="speakText(example)" :disabled="!speechSupported || isSpeaking" :class="['voice-btn', 'voice-btn-sm', { speaking: isSpeaking }]">{{ isSpeaking ? 'ğŸ”Š' : 'ğŸ”ˆ' }}</button></div></div></div><div v-if="card.tags.length > 0" class="card-tags"><span v-for="tag in card.tags" :key="tag" class="card-tag">{{ tag }}</span></div><div class="card-actions"><button @click="editCard(card)" class="btn btn-secondary">ç·¨è¼¯</button> <button @click="deleteCard(card.id)" class="btn btn-danger">åˆªé™¤</button></div></div></div><div v-if="totalPages > 1" class="pagination"><button @click="currentPage = 1" :disabled="currentPage === 1">ç¬¬ä¸€é </button> <button @click="currentPage--" :disabled="currentPage === 1">ä¸Šä¸€é </button> <span>ç¬¬ {{ currentPage }} é ï¼Œå…± {{ totalPages }} é </span> <button @click="currentPage++" :disabled="currentPage === totalPages">ä¸‹ä¸€é </button> <button @click="currentPage = totalPages" :disabled="currentPage === totalPages">æœ€å¾Œé </button></div></div><div v-if="currentTab === 'study'" class="content-section"><div v-if="todayDue === 0" class="no-cards"><h3>ğŸ‰ å¤ªæ£’äº†ï¼</h3><p>ä»Šå¤©æ²’æœ‰éœ€è¦è¤‡ç¿’çš„å–®å­—äº†ï¼</p></div><div v-else-if="!currentStudyCard" class="no-cards"><h3>æº–å‚™é–‹å§‹å­¸ç¿’</h3><p>ä»Šå¤©æœ‰ {{ todayDue }} å¼µå¡ç‰‡éœ€è¦è¤‡ç¿’</p><button @click="startStudySession" class="btn btn-primary">é–‹å§‹å­¸ç¿’</button></div><div v-else class="study-card"><div class="show-translation-toggle"><label>é¡¯ç¤ºç¿»è­¯ <label class="toggle-switch"><input type="checkbox" v-model="showTranslation"> <span class="slider"></span></label></label></div><div class="study-word">{{ currentStudyCard.english }}<div class="voice-controls-inline"><button @click="speakText(currentStudyCard.english)" :disabled="!speechSupported || isSpeaking" :class="['voice-btn', 'voice-btn-sm', { speaking: isSpeaking }]">{{ isSpeaking ? 'ğŸ”Š' : 'ğŸ”ˆ' }}</button></div></div><div v-if="showTranslation" class="study-translation">{{ currentStudyCard.chinese }}</div><div v-if="currentStudyCard.examples.some(ex => ex)" class="study-examples"><div v-for="example in currentStudyCard.examples.filter(ex => ex)" :key="example" class="study-example">{{ example }}<div class="voice-controls-inline"><button @click="speakText(example)" :disabled="!speechSupported || isSpeaking" :class="['voice-btn', 'voice-btn-sm', { speaking: isSpeaking }]">{{ isSpeaking ? 'ğŸ”Š' : 'ğŸ”ˆ' }}</button></div></div></div><div class="study-actions"><button @click="reviewCard(0)" class="study-btn btn-again">ğŸ˜µ å®Œå…¨å¿˜äº†</button> <button @click="reviewCard(1)" class="study-btn btn-hard">ğŸ˜° å‹‰å¼·æƒ³èµ·</button> <button @click="reviewCard(2)" class="study-btn btn-good">ğŸ˜Š è¨˜å¾—</button> <button @click="reviewCard(3)" class="study-btn btn-easy">ğŸ˜ éå¸¸ç†Ÿæ‚‰</button></div><div style="margin-top:20px;color:#666">å‰©é¤˜ï¼š{{ studyCards.length }} å¼µå¡ç‰‡</div></div></div><div v-if="currentTab === 'import'" class="content-section"><h2>åŒ¯å…¥åŒ¯å‡º</h2><div style="margin-bottom:30px"><h3>åŒ¯å‡ºè³‡æ–™</h3><p>å°‡æ‰€æœ‰å–®å­—å¡åŒ¯å‡ºç‚º CSV æ ¼å¼ï¼Œå¯åœ¨ Excel æˆ– Google Sheets ä¸­ç·¨è¼¯ã€‚</p><button @click="exportCards" class="btn btn-success">åŒ¯å‡º CSV</button></div><div><h3>åŒ¯å…¥è³‡æ–™</h3><p>ä¸Šå‚³ CSV æª”æ¡ˆä¾†æ‰¹é‡æ–°å¢å–®å­—å¡ã€‚</p><label for="csvFile" class="file-label">é¸æ“‡ CSV æª”æ¡ˆ</label> <input type="file" id="csvFile" accept=".csv" @change="handleFileUpload" class="file-input"><div v-if="importPreview.length > 0" style="margin-top:20px"><h4>é è¦½åŒ¯å…¥è³‡æ–™ (å‰5ç­†)</h4><div class="card-list"><div v-for="(card, index) in importPreview.slice(0, 5)" :key="index" class="card-item"><div class="card-word">{{ card.english }}</div><div class="card-translation">{{ card.chinese }}</div><div v-if="card.tags.length > 0" class="card-tags"><span v-for="tag in card.tags" :key="tag" class="card-tag">{{ tag }}</span></div></div></div><div style="margin-top:20px"><button @click="confirmImport" class="btn btn-primary">âœ… ç¢ºèªåŒ¯å…¥ ({{ importPreview.length }} ç­†)</button> <button @click="cancelImport" class="btn btn-secondary">âŒ å–æ¶ˆ</button></div></div></div></div></div></div><script type="module">import{openDB}from"https://cdn.jsdelivr.net/npm/idb@7/+esm";const{createApp:createApp,reactive:reactive,computed:computed,onMounted:onMounted,ref:ref}=Vue;createApp({setup(){const e=ref("add"),t=ref([]),a=reactive({english:"",chinese:"",examples:["","",""],tags:[]}),n=ref(""),s=ref(""),r=ref(""),l=ref(30),i=ref(1),o=ref([]),c=ref(null),u=ref(!1),d=ref([]),p=ref(null),v=ref(!1),g=ref(!1),h=ref("en-US"),m=ref(.9),w=ref([{code:"en-US",name:"ç¾å¼è‹±èª",flag:"ğŸ‡ºğŸ‡¸"},{code:"en-GB",name:"è‹±å¼è‹±èª",flag:"ğŸ‡¬ğŸ‡§"},{code:"en-AU",name:"æ¾³æ´²è‹±èª",flag:"ğŸ‡¦ğŸ‡º"},{code:"en-CA",name:"åŠ æ‹¿å¤§è‹±èª",flag:"ğŸ‡¨ğŸ‡¦"}]);let f;const S=async e=>{const t=JSON.parse(JSON.stringify(e));return await f.put("cards",t)},y=async()=>{const e=await f.getAll("cards");t.value=e.sort(((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)))},C=(e=new Date)=>new Date(e.getTime()+288e5).toISOString().split("T")[0],D=computed((()=>{const e=new Set;return t.value.forEach((t=>{t.tags.forEach((t=>e.add(t)))})),Array.from(e).sort()})),x=computed((()=>{let e=t.value;if(s.value){const t=s.value.toLowerCase();e=e.filter((e=>e.english.toLowerCase().includes(t)||e.chinese.toLowerCase().includes(t)||e.examples.some((e=>e.toLowerCase().includes(t)))||e.tags.some((e=>e.toLowerCase().includes(t)))))}return r.value&&(e=e.filter((e=>e.tags.includes(r.value)))),e})),A=computed((()=>Math.ceil(x.value.length/l.value))),I=computed((()=>{const e=(i.value-1)*l.value,t=e+l.value;return x.value.slice(e,t)})),F=computed((()=>t.value.length)),O=computed((()=>{const e=C();return t.value.filter((t=>t.dueDate<=e)).length})),b=computed((()=>t.value.reduce(((e,t)=>e+t.reviewCount),0))),R=computed((()=>{if(0===t.value.length)return 0;return t.value.reduce(((e,t)=>e+t.easeFactor),0)/t.value.length}));return onMounted((()=>{if((async()=>{f=await openDB("flashcards",1,{upgrade(e){if(!e.objectStoreNames.contains("cards")){const t=e.createObjectStore("cards",{keyPath:"id",autoIncrement:!0});t.createIndex("dueDate","dueDate"),t.createIndex("createdAt","createdAt")}}}),await y()})(),v.value="speechSynthesis"in window,v.value&&(h.value="en-US"),v.value){const e=()=>{window.speechSynthesis.getVoices().length};window.speechSynthesis.onvoiceschanged=e,e()}})),{currentTab:e,cards:t,newCard:a,tagInput:n,searchQuery:s,selectedTag:r,pageSize:l,currentPage:i,studyCards:o,currentStudyCard:c,showTranslation:u,importPreview:d,editingCard:p,allTags:D,filteredCards:x,totalPages:A,paginatedCards:I,totalCards:F,todayDue:O,totalReviews:b,averageEase:R,speechSupported:v,isSpeaking:g,speechRate:m,selectedVoice:h,availableVoices:w,addCard:async()=>{const e=new Date,t=new Date(e.getTime()+288e5);if(p.value){const e={...p.value,english:a.english.trim(),chinese:a.chinese.trim(),examples:a.examples.map((e=>e.trim())).filter((e=>e)),tags:[...a.tags],updatedAt:t.toISOString()};await S(e),p.value=null,alert("å–®å­—å¡æ›´æ–°æˆåŠŸï¼")}else{const n={english:a.english.trim(),chinese:a.chinese.trim(),examples:a.examples.map((e=>e.trim())).filter((e=>e)),tags:[...a.tags],easeFactor:2.5,interval:1,repetitions:0,dueDate:C(e),lastReview:null,reviewCount:0,createdAt:t.toISOString(),updatedAt:t.toISOString()};await S(n),alert("å–®å­—å¡æ–°å¢æˆåŠŸï¼")}await y(),a.english="",a.chinese="",a.examples=["","",""],a.tags=[],n.value=""},addTag:()=>{const e=n.value.trim();e&&!a.tags.includes(e)&&(a.tags.push(e),n.value="")},removeTag:e=>{const t=a.tags.indexOf(e);t>-1&&a.tags.splice(t,1)},editCard:t=>{p.value={...t},a.english=t.english,a.chinese=t.chinese,a.examples=[...t.examples,"","",""].slice(0,3),a.tags=[...t.tags],e.value="add"},cancelEdit:()=>{p.value=null,a.english="",a.chinese="",a.examples=["","",""],a.tags=[],n.value=""},deleteCard:async e=>{confirm("ç¢ºå®šè¦åˆªé™¤é€™å¼µå–®å­—å¡å—ï¼Ÿ")&&await(async e=>{await f.delete("cards",e),await y()})(e)},startStudySession:()=>{const e=C();o.value=t.value.filter((t=>t.dueDate<=e)),o.value.length>0&&(c.value=o.value[0],u.value=!1)},reviewCard:async e=>{if(!c.value)return;const t=c.value,a=((e,t,a)=>{let n=e,s=t,r=1;return a>=3?(r=0===t?1:1===t?6:Math.round(t*e),s=t+1):(s=0,r=1),n=e+(.1-(5-a)*(.08+.02*(5-a))),n<1.3&&(n=1.3),{easeFactor:n,repetitions:s,interval:r}})(t.easeFactor,t.repetitions,e),n=new Date;n.setDate(n.getDate()+a.interval);const s={...t,easeFactor:a.easeFactor,interval:a.interval,repetitions:a.repetitions,dueDate:C(n),lastReview:new Date(Date.now()+288e5).toISOString(),reviewCount:t.reviewCount+1,updatedAt:new Date(Date.now()+288e5).toISOString()};await S(s),await y(),o.value.shift(),o.value.length>0?(c.value=o.value[0],u.value=!1):(c.value=null,alert("ğŸ‰ æ­å–œå®Œæˆä»Šæ—¥è¤‡ç¿’ï¼"))},exportCards:()=>{if(0===t.value.length)return void alert("æ²’æœ‰è³‡æ–™å¯ä»¥åŒ¯å‡º");const e=t.value.map((e=>({id:e.id,english:e.english,chinese:e.chinese,tags:e.tags.join(","),example1:e.examples[0]||"",example2:e.examples[1]||"",example3:e.examples[2]||"",easeFactor:e.easeFactor,interval:e.interval,repetitions:e.repetitions,dueDate:e.dueDate,lastReview:e.lastReview||"",reviewCount:e.reviewCount,createdAt:e.createdAt,updatedAt:e.updatedAt}))),a=Papa.unparse(e),n=new Blob([a],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),r=URL.createObjectURL(n);s.setAttribute("href",r),s.setAttribute("download",`flashcards_${C()}.csv`),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)},handleFileUpload:e=>{const t=e.target.files[0];if(!t)return;const a=new Date(Date.now()+288e5);Papa.parse(t,{header:!0,complete:e=>{const t=e.data.filter((e=>e.english&&e.chinese)).map((e=>({english:e.english.trim(),chinese:e.chinese.trim(),examples:[e.example1||"",e.example2||"",e.example3||""].filter((e=>e)),tags:e.tags?e.tags.split(",").map((e=>e.trim())).filter((e=>e)):[],easeFactor:parseFloat(e.easeFactor)||2.5,interval:parseInt(e.interval)||1,repetitions:parseInt(e.repetitions)||0,dueDate:e.dueDate||C(),lastReview:e.lastReview||null,reviewCount:parseInt(e.reviewCount)||0,createdAt:e.createdAt||a.toISOString(),updatedAt:a.toISOString()})));d.value=t},error:e=>{alert("æª”æ¡ˆè§£æå¤±æ•—ï¼š"+e.message)}})},confirmImport:async()=>{if(0===d.value.length)return;let e=0;for(const a of d.value){t.value.find((e=>e.english.toLowerCase()===a.english.toLowerCase()))||(await S(a),e++)}await y(),d.value=[];const a=document.getElementById("csvFile");a&&(a.value=""),alert(`æˆåŠŸåŒ¯å…¥ ${e} å¼µå–®å­—å¡ï¼`)},cancelImport:()=>{d.value=[];const e=document.getElementById("csvFile");e&&(e.value="")},speakText:e=>{if(!v.value||!e.trim())return;window.speechSynthesis.cancel();const t=new SpeechSynthesisUtterance(e);t.lang=h.value||"en-US",t.rate=m.value,t.pitch=1,t.volume=1;const a=window.speechSynthesis.getVoices().find((e=>e.lang.startsWith(h.value)||e.lang.replace("_","-")===h.value));a&&(t.voice=a),t.onstart=()=>{g.value=!0},t.onend=()=>{g.value=!1},t.onerror=e=>{console.error("èªéŸ³æ’­æ”¾éŒ¯èª¤:",e.error),g.value=!1},window.speechSynthesis.speak(t)},stopSpeaking:()=>{v.value&&(window.speechSynthesis.cancel(),g.value=!1)}}}}).mount("#app")</script></body></html>